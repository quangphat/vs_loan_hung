/**
 * Copyright 2014 Telerik AD
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/**
 * Copyright 2014 Telerik AD
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

!function(e,define){define(["./kendo.data.min"],e)}(function(){return function(e,t){function n(e,t,n,i,r){return e({idx:t,text:n,ns:u.ns,numeric:i,title:r||""})}function i(e,t,n){return k({className:e.substring(1),text:t,wrapClassName:n||""})}function r(e,t,n,i){e.find(t).parent().attr(u.attr("page"),n).attr("tabindex",-1).toggleClass("k-state-disabled",i)}function a(e,t){r(e,f,1,1>=t)}function o(e,t){r(e,m,Math.max(1,t-1),1>=t)}function s(e,t,n){r(e,g,Math.min(n,t+1),t>=n)}function l(e,t,n){r(e,p,n,t>=n)}var u=window.kendo,c=u.ui,d=c.Widget,h=e.proxy,f=".k-i-seek-w",p=".k-i-seek-e",m=".k-i-arrow-w",g=".k-i-arrow-e",v="change",_=".kendoPager",w="click",b="keydown",y="disabled",k=u.template('<a href="\\#" title="#=text#" class="k-link k-pager-nav #= wrapClassName #"><span class="k-icon #= className #">#=text#</span></a>'),x=d.extend({init:function(t,n){var r,c,y=this;d.fn.init.call(y,t,n),n=y.options,y.dataSource=u.data.DataSource.create(n.dataSource),y.linkTemplate=u.template(y.options.linkTemplate),y.selectTemplate=u.template(y.options.selectTemplate),r=y.page(),c=y.totalPages(),y._refreshHandler=h(y.refresh,y),y.dataSource.bind(v,y._refreshHandler),n.previousNext&&(y.element.find(f).length||(y.element.append(i(f,n.messages.first,"k-pager-first")),a(y.element,r,c)),y.element.find(m).length||(y.element.append(i(m,n.messages.previous)),o(y.element,r,c))),n.numeric&&(y.list=y.element.find(".k-pager-numbers"),y.list.length||(y.list=e('<ul class="k-pager-numbers k-reset" />').appendTo(y.element))),n.input&&(y.element.find(".k-pager-input").length||y.element.append('<span class="k-pager-input k-label">'+n.messages.page+'<input class="k-textbox">'+u.format(n.messages.of,c)+"</span>"),y.element.on(b+_,".k-pager-input input",h(y._keydown,y))),n.previousNext&&(y.element.find(g).length||(y.element.append(i(g,n.messages.next)),s(y.element,r,c)),y.element.find(p).length||(y.element.append(i(p,n.messages.last,"k-pager-last")),l(y.element,r,c))),n.pageSizes&&(y.element.find(".k-pager-sizes").length||e('<span class="k-pager-sizes k-label"><select/>'+n.messages.itemsPerPage+"</span>").appendTo(y.element).find("select").html(e.map(e.isArray(n.pageSizes)?n.pageSizes:[5,10,20],function(e){return"<option>"+e+"</option>"}).join("")).end().appendTo(y.element),y.element.find(".k-pager-sizes select").val(y.pageSize()),u.ui.DropDownList&&y.element.find(".k-pager-sizes select").show().kendoDropDownList(),y.element.on(v+_,".k-pager-sizes select",h(y._change,y))),n.refresh&&(y.element.find(".k-pager-refresh").length||y.element.append('<a href="#" class="k-pager-refresh k-link" title="'+n.messages.refresh+'"><span class="k-icon k-i-refresh">'+n.messages.refresh+"</span></a>"),y.element.on(w+_,".k-pager-refresh",h(y._refreshClick,y))),n.info&&(y.element.find(".k-pager-info").length||y.element.append('<span class="k-pager-info k-label" />')),y.element.on(w+_,"a",h(y._click,y)).addClass("k-pager-wrap k-widget"),n.autoBind&&y.refresh(),u.notify(y)},destroy:function(){var e=this;d.fn.destroy.call(e),e.element.off(_),e.dataSource.unbind(v,e._refreshHandler),e._refreshHandler=null,u.destroy(e.element),e.element=e.list=null},events:[v],options:{name:"Pager",selectTemplate:'<li><span class="k-state-selected">#=text#</span></li>',linkTemplate:'<li><a tabindex="-1" href="\\#" class="k-link" data-#=ns#page="#=idx#" #if (title !== "") {# title="#=title#" #}#>#=text#</a></li>',buttonCount:10,autoBind:!0,numeric:!0,info:!0,input:!1,previousNext:!0,pageSizes:!1,refresh:!1,messages:{display:"{0} - {1} of {2} items",empty:"No items to display",page:"Page",of:"of {0}",itemsPerPage:"items per page",first:"Go to the first page",previous:"Go to the previous page",next:"Go to the next page",last:"Go to the last page",refresh:"Refresh",morePages:"More pages"}},setDataSource:function(e){var t=this;t.dataSource.unbind(v,t._refreshHandler),t.dataSource=t.options.dataSource=e,e.bind(v,t._refreshHandler),t.options.autoBind&&e.fetch()},refresh:function(e){var t,i,r,c=this,d=1,h="",f=c.page(),p=c.options,m=c.pageSize(),g=c.dataSource.total(),v=c.totalPages(),_=c.linkTemplate,w=p.buttonCount;if(!e||"itemchange"!=e.action){if(p.numeric){for(f>w&&(r=f%w,d=0===r?f-w+1:f-r+1),i=Math.min(d+w-1,v),d>1&&(h+=n(_,d-1,"...",!1,p.messages.morePages)),t=d;i>=t;t++)h+=n(t==f?c.selectTemplate:_,t,t,!0);v>i&&(h+=n(_,t,"...",!1,p.messages.morePages)),""===h&&(h=c.selectTemplate({text:0})),c.list.html(h)}p.info&&(h=g>0?u.format(p.messages.display,(f-1)*m+1,Math.min(f*m,g),g):p.messages.empty,c.element.find(".k-pager-info").html(h)),p.input&&c.element.find(".k-pager-input").html(c.options.messages.page+'<input class="k-textbox">'+u.format(p.messages.of,v)).find("input").val(f).attr(y,1>g).toggleClass("k-state-disabled",1>g),p.previousNext&&(a(c.element,f,v),o(c.element,f,v),s(c.element,f,v),l(c.element,f,v)),p.pageSizes&&c.element.find(".k-pager-sizes select").val(m).filter("["+u.attr("role")+"=dropdownlist]").kendoDropDownList("value",m).kendoDropDownList("text",m)}},_keydown:function(e){if(e.keyCode===u.keys.ENTER){var t=this.element.find(".k-pager-input").find("input"),n=parseInt(t.val(),10);(isNaN(n)||1>n||n>this.totalPages())&&(n=this.page()),t.val(n),this.page(n)}},_refreshClick:function(e){e.preventDefault(),this.dataSource.read()},_change:function(e){var t=parseInt(e.currentTarget.value,10);isNaN(t)||this.dataSource.pageSize(t)},_click:function(t){var n=e(t.currentTarget);t.preventDefault(),n.is(".k-state-disabled")||this.page(n.attr(u.attr("page")))},totalPages:function(){return Math.ceil((this.dataSource.total()||0)/this.pageSize())},pageSize:function(){return this.dataSource.pageSize()||this.dataSource.total()},page:function(e){return e===t?this.dataSource.total()>0?this.dataSource.page():0:(this.dataSource.page(e),this.trigger(v,{index:e}),t)}});c.plugin(x)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(e,t){t()});