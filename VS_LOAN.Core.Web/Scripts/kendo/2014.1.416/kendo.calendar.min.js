/**
 * Copyright 2014 Telerik AD
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/**
 * Copyright 2014 Telerik AD
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

!function(e,define){define(["./kendo.core.min"],e)}(function(){return function(e,t){function n(e,t,n,i){var a,s=e.getFullYear(),r=t.getFullYear(),o=n.getFullYear();return s-=s%i,a=s+(i-1),r>s&&(s=r),a>o&&(a=o),s+"-"+a}function i(e){for(var t,n=0,i=e.min,a=e.max,s=e.start,r=e.setter,l=e.build,c=e.cells||12,u=e.perRow||4,d=e.content||A,h=e.empty||Y,f=e.html||'<table tabindex="0" role="grid" class="k-content k-meta-view" cellspacing="0"><tbody><tr role="row">';c>n;n++)n>0&&n%u===0&&(f+='</tr><tr role="row">'),t=l(s,n),f+=o(s,i,a)?d(t):h(t),r(s,1);return f+"</tr></tbody></table>"}function a(e,t,n){var i=e.getFullYear(),a=t.getFullYear(),s=a,r=0;return n&&(a-=a%n,s=a-a%n+n-1),i>s?r=1:a>i&&(r=-1),r}function s(){var e=new gt;return new gt(e.getFullYear(),e.getMonth(),e.getDate())}function r(e,t,n){var i=s();return e&&(i=new gt(+e)),t>i?i=new gt(+t):i>n&&(i=new gt(+n)),i}function o(e,t,n){return+e>=+t&&+n>=+e}function l(e,t){return e.slice(t).concat(e.slice(0,t))}function c(e,t,n){t=t instanceof gt?t.getFullYear():e.getFullYear()+n*t,e.setFullYear(t)}function u(t){e(this).toggleClass(Q,it.indexOf(t.type)>-1||t.type==tt)}function d(e){e.preventDefault()}function h(e){return S(e).calendars.standard}function f(e){var n=pt[e.start],i=pt[e.depth],a=S(e.culture);e.format=F(e.format||a.calendars.standard.patterns.d),isNaN(n)&&(n=0,e.start=j),(i===t||i>n)&&(e.depth=j),e.dates||(e.dates=[])}function g(e){N&&e.find("*").attr("unselectable","on")}function p(e,t){for(var n=0,i=t.length;i>n;n++)if(e===+t[n])return!0;return!1}function v(e,t){return e?e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate():!1}function m(e,t){return e?e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth():!1}var _,b=window.kendo,w=b.support,y=b.ui,k=y.Widget,x=b.keys,C=b.parseDate,D=b.date.adjustDST,F=b._extractFormat,T=b.template,S=b.getCulture,B=b.support.transitions,M=B?B.css+"transform-origin":"",A=T('<td#=data.cssClass# role="gridcell"><a tabindex="-1" class="k-link" href="\\#" data-#=data.ns#value="#=data.dateString#">#=data.value#</a></td>',{useWithBlock:!1}),Y=T('<td role="gridcell">&nbsp;</td>',{useWithBlock:!1}),O=b.support.browser,N=O.msie&&9>O.version,E=".kendoCalendar",H="click"+E,V="keydown"+E,P="id",L="min",I="left",R="slideIn",j="month",U="century",W="change",z="navigate",G="value",Q="k-state-hover",q="k-state-disabled",K="k-state-focused",Z="k-other-month",J=' class="'+Z+'"',X="k-nav-today",$="td:has(.k-link)",et="blur"+E,tt="focus",nt=tt+E,it=w.touch?"touchstart":"mouseenter",at=w.touch?"touchstart"+E:"mouseenter"+E,st=w.touch?"touchend"+E+" touchmove"+E:"mouseleave"+E,rt=6e4,ot=864e5,lt="_prevArrow",ct="_nextArrow",ut="aria-disabled",dt="aria-selected",ht=e.proxy,ft=e.extend,gt=Date,pt={month:0,year:1,decade:2,century:3},vt=k.extend({init:function(t,n){var i,a,s=this;k.fn.init.call(s,t,n),t=s.wrapper=s.element,n=s.options,n.url=window.unescape(n.url),s._templates(),s._header(),s._footer(s.footer),a=t.addClass("k-widget k-calendar").on(at+" "+st,$,u).on(V,"table.k-content",ht(s._move,s)).on(H,$,function(t){var n=t.currentTarget.firstChild;-1!=n.href.indexOf("#")&&t.preventDefault(),s._click(e(n))}).on("mouseup"+E,"table.k-content, .k-footer",function(){s._focusView(s.options.focusOnNav!==!1)}).attr(P),a&&(s._cellID=a+"_cell_selected"),f(n),i=C(n.value,n.format,n.culture),s._index=pt[n.start],s._current=new gt(+r(i,n.min,n.max)),s._addClassProxy=function(){s._active=!0,s._cell.addClass(K)},s._removeClassProxy=function(){s._active=!1,s._cell.removeClass(K)},s.value(i),b.notify(s)},options:{name:"Calendar",value:null,min:new gt(1900,0,1),max:new gt(2099,11,31),dates:[],url:"",culture:"",footer:"",format:"",month:{},start:j,depth:j,animation:{horizontal:{effects:R,reverse:!0,duration:500,divisor:2},vertical:{effects:"zoomIn",duration:400}}},events:[W,z],setOptions:function(e){var t=this;f(e),e.dates[0]||(e.dates=t.options.dates),k.fn.setOptions.call(t,e),t._templates(),t._footer(t.footer),t._index=pt[t.options.start],t.navigate()},destroy:function(){var e=this,t=e._today;e.element.off(E),e._title.off(E),e[lt].off(E),e[ct].off(E),b.destroy(e._table),t&&b.destroy(t.off(E)),k.fn.destroy.call(e)},current:function(){return this._current},view:function(){return this._view},focus:function(e){e=e||this._table,this._bindTable(e),e.focus()},min:function(e){return this._option(L,e)},max:function(e){return this._option("max",e)},navigateToPast:function(){this._navigate(lt,-1)},navigateToFuture:function(){this._navigate(ct,1)},navigateUp:function(){var e=this,t=e._index;e._title.hasClass(q)||e.navigate(e._current,++t)},navigateDown:function(e){var n=this,i=n._index,a=n.options.depth;if(e)return i===pt[a]?(+n._value!=+e&&(n.value(e),n.trigger(W)),t):(n.navigate(e,--i),t)},navigate:function(n,i){i=isNaN(i)?pt[i]:i;var a,s,o,l,c=this,u=c.options,d=u.culture,h=u.min,f=u.max,p=c._title,v=c._table,m=c._oldTable,b=c._value,w=c._current,y=n&&+n>+w,k=i!==t&&i!==c._index;n||(n=w),c._current=n=new gt(+r(n,h,f)),i===t?i=c._index:c._index=i,c._view=s=_.views[i],o=s.compare,l=i===pt[U],p.toggleClass(q,l).attr(ut,l),l=o(n,h)<1,c[lt].toggleClass(q,l).attr(ut,l),l=o(n,f)>-1,c[ct].toggleClass(q,l).attr(ut,l),v&&m&&m.data("animating")&&(m.kendoStop(!0,!0),v.kendoStop(!0,!0)),c._oldTable=v,(!v||c._changeView)&&(p.html(s.title(n,h,f,d)),c._table=a=e(s.content(ft({min:h,max:f,date:n,url:u.url,dates:u.dates,format:u.format,culture:d},c[s.name]))),g(a),c._animate({from:v,to:a,vertical:k,future:y}),c._focus(n),c.trigger(z)),i===pt[u.depth]&&b&&c._class("k-state-selected",s.toDateString(b)),c._class(K,s.toDateString(n)),!v&&c._cell&&c._cell.removeClass(K),c._changeView=!0},value:function(e){var n=this,i=n._view,a=n.options,s=n._view,r=a.min,l=a.max;return e===t?n._value:(e=C(e,a.format,a.culture),null!==e&&(e=new gt(+e),o(e,r,l)||(e=null)),n._value=e,s&&null===e&&n._cell?n._cell.removeClass("k-state-selected"):(n._changeView=!e||i&&0!==i.compare(e,n._current),n.navigate(e)),t)},_move:function(t){var n,i,a,s,o=this,l=o.options,c=t.keyCode,u=o._view,d=o._index,h=new gt(+o._current),f=b.support.isRtl(o.wrapper);return t.target===o._table[0]&&(o._active=!0),t.ctrlKey?c==x.RIGHT&&!f||c==x.LEFT&&f?(o.navigateToFuture(),i=!0):c==x.LEFT&&!f||c==x.RIGHT&&f?(o.navigateToPast(),i=!0):c==x.UP?(o.navigateUp(),i=!0):c==x.DOWN&&(o._click(e(o._cell[0].firstChild)),i=!0):(c==x.RIGHT&&!f||c==x.LEFT&&f?(n=1,i=!0):c==x.LEFT&&!f||c==x.RIGHT&&f?(n=-1,i=!0):c==x.UP?(n=0===d?-7:-4,i=!0):c==x.DOWN?(n=0===d?7:4,i=!0):c==x.ENTER?(o._click(e(o._cell[0].firstChild)),i=!0):c==x.HOME||c==x.END?(a=c==x.HOME?"first":"last",s=u[a](h),h=new gt(s.getFullYear(),s.getMonth(),s.getDate(),h.getHours(),h.getMinutes(),h.getSeconds(),h.getMilliseconds()),i=!0):c==x.PAGEUP?(i=!0,o.navigateToPast()):c==x.PAGEDOWN&&(i=!0,o.navigateToFuture()),(n||a)&&(a||u.setDate(h,n),o._focus(r(h,l.min,l.max)))),i&&t.preventDefault(),o._current},_animate:function(e){var t=this,n=e.from,i=e.to,a=t._active;n?n.parent().data("animating")?(n.parent().kendoStop(!0,!0).remove(),n.remove(),i.insertAfter(t.element[0].firstChild),t._focusView(a)):n.is(":visible")&&t.options.animation!==!1?t[e.vertical?"_vertical":"_horizontal"](n,i,e.future):(i.insertAfter(n),n.remove(),t._focusView(a)):(i.insertAfter(t.element[0].firstChild),t._bindTable(i))},_horizontal:function(e,n,i){var a=this,s=a._active,r=a.options.animation.horizontal,o=r.effects,l=e.outerWidth();o&&-1!=o.indexOf(R)&&(e.add(n).css({width:l}),e.wrap("<div/>"),a._focusView(s,e),e.parent().css({position:"relative",width:2*l,"float":I,"margin-left":i?0:-l}),n[i?"insertAfter":"insertBefore"](e),ft(r,{effects:R+":"+(i?"right":I),complete:function(){e.remove(),n.unwrap(),a._focusView(s),a._oldTable=t}}),e.parent().kendoStop(!0,!0).kendoAnimate(r))},_vertical:function(e,n){var i,a,s=this,r=s.options.animation.vertical,o=r.effects,l=s._active;o&&-1!=o.indexOf("zoom")&&(n.css({position:"absolute",top:e.prev().outerHeight(),left:0}).insertBefore(e),M&&(i=s._cellByDate(s._view.toDateString(s._current)),a=i.position(),a=a.left+parseInt(i.width()/2,10)+"px "+(a.top+parseInt(i.height()/2,10)+"px"),n.css(M,a)),e.kendoStop(!0,!0).kendoAnimate({effects:"fadeOut",duration:600,complete:function(){e.remove(),n.css({position:"static",top:0,left:0}),s._focusView(l),s._oldTable=t}}),n.kendoStop(!0,!0).kendoAnimate(r))},_cellByDate:function(t){return this._table.find("td:not(."+Z+")").filter(function(){return e(this.firstChild).attr(b.attr(G))===t})},_class:function(t,n){var i=this,a=i._cellID,s=i._cell;s&&s.removeAttr(dt).removeAttr("aria-label").removeAttr(P),s=i._table.find("td:not(."+Z+")").removeClass(t).filter(function(){return e(this.firstChild).attr(b.attr(G))===n}).attr(dt,!0),t!==K||i._active||i.options.focusOnNav===!1||(t=""),s.addClass(t),s[0]&&(i._cell=s),a&&(s.attr(P,a),i._table.removeAttr("aria-activedescendant").attr("aria-activedescendant",a))},_bindTable:function(e){e.on(nt,this._addClassProxy).on(et,this._removeClassProxy)},_click:function(e){var t=this,n=t.options,i=new Date(+t._current),a=e.attr(b.attr(G)).split("/");a=new gt(a[0],a[1],a[2]),D(a,0),t._view.setDate(i,a),t.navigateDown(r(i,n.min,n.max))},_focus:function(e){var t=this,n=t._view;0!==n.compare(e,t._current)?t.navigate(e):(t._current=e,t._class(K,n.toDateString(e)))},_focusView:function(e,t){e&&this.focus(t)},_footer:function(n){var i=this,a=s(),r=i.element,o=r.find(".k-footer");return n?(o[0]||(o=e('<div class="k-footer"><a href="#" class="k-link k-nav-today"></a></div>').appendTo(r)),i._today=o.show().find(".k-link").html(n(a)).attr("title",b.toString(a,"D",i.options.culture)),i._toggle(),t):(i._toggle(!1),o.hide(),t)},_header:function(){var e,t=this,n=t.element;n.find(".k-header")[0]||n.html('<div class="k-header"><a href="#" role="button" class="k-link k-nav-prev"><span class="k-icon k-i-arrow-w"></span></a><a href="#" role="button" aria-live="assertive" aria-atomic="true" class="k-link k-nav-fast"></a><a href="#" role="button" class="k-link k-nav-next"><span class="k-icon k-i-arrow-e"></span></a></div>'),e=n.find(".k-link").on(at+" "+st+" "+nt+" "+et,u).click(!1),t._title=e.eq(1).on(H,function(){t._focusView(t.options.focusOnNav!==!1),t.navigateUp()}),t[lt]=e.eq(0).on(H,function(){t._focusView(t.options.focusOnNav!==!1),t.navigateToPast()}),t[ct]=e.eq(2).on(H,function(){t._focusView(t.options.focusOnNav!==!1),t.navigateToFuture()})},_navigate:function(e,t){var n=this,i=n._index+1,a=new gt(+n._current);e=n[e],e.hasClass(q)||(i>3?a.setFullYear(a.getFullYear()+100*t):_.views[i].setDate(a,t),n.navigate(a))},_option:function(e,n){var i,a=this,s=a.options,r=a._value||a._current;return n===t?s[e]:(n=C(n,s.format,s.culture),n&&(s[e]=new gt(+n),i=e===L?n>r:r>n,(i||m(r,n))&&(i&&(a._value=null),a._changeView=!0),a._changeView||(a._changeView=!(!s.month.content&&!s.month.empty)),a.navigate(a._value),a._toggle()),t)},_toggle:function(e){var n=this,i=n.options,a=n._today;e===t&&(e=o(s(),i.min,i.max)),a&&(a.off(H),e?a.addClass(X).removeClass(q).on(H,ht(n._todayClick,n)):a.removeClass(X).addClass(q).on(H,d))},_todayClick:function(e){var t=this,n=pt[t.options.depth],i=s();e.preventDefault(),0===t._view.compare(t._current,i)&&t._index==n&&(t._changeView=!1),t._value=i,t.navigate(i,n),t.trigger(W)},_templates:function(){var e=this,t=e.options,n=t.footer,i=t.month,a=i.content,s=i.empty;e.month={content:T('<td#=data.cssClass# role="gridcell"><a tabindex="-1" class="k-link#=data.linkClass#" href="#=data.url#" '+b.attr("value")+'="#=data.dateString#" title="#=data.title#">'+(a||"#=data.value#")+"</a></td>",{useWithBlock:!!a}),empty:T('<td role="gridcell">'+(s||"&nbsp;")+"</td>",{useWithBlock:!!s})},e.footer=n!==!1?T(n||'#= kendo.toString(data,"D","'+t.culture+'") #',{useWithBlock:!1}):null}});y.plugin(vt),_={firstDayOfMonth:function(e){return new gt(e.getFullYear(),e.getMonth(),1)},firstVisibleDay:function(e,t){t=t||b.culture().calendar;for(var n=t.firstDay,i=new gt(e.getFullYear(),e.getMonth(),0,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds());i.getDay()!=n;)_.setTime(i,-1*ot);return i},setTime:function(e,t){var n=e.getTimezoneOffset(),i=new gt(e.getTime()+t),a=i.getTimezoneOffset()-n;e.setTime(i.getTime()+a*rt)},views:[{name:j,title:function(e,t,n,i){return h(i).months.names[e.getMonth()]+" "+e.getFullYear()},content:function(e){for(var t=this,n=0,a=e.min,s=e.max,r=e.date,o=e.dates,c=e.format,u=e.culture,d=e.url,f=d&&o[0],g=h(u),v=g.firstDay,m=g.days,w=l(m.names,v),y=l(m.namesShort,v),k=_.firstVisibleDay(r,g),x=t.first(r),C=t.last(r),F=t.toDateString,T=new gt,S='<table tabindex="0" role="grid" class="k-content" cellspacing="0"><thead><tr role="row">';7>n;n++)S+='<th scope="col" title="'+w[n]+'">'+y[n]+"</th>";return T=new gt(T.getFullYear(),T.getMonth(),T.getDate()),D(T,0),T=+T,i({cells:42,perRow:7,html:S+='</tr></thead><tbody><tr role="row">',start:new gt(k.getFullYear(),k.getMonth(),k.getDate()),min:new gt(a.getFullYear(),a.getMonth(),a.getDate()),max:new gt(s.getFullYear(),s.getMonth(),s.getDate()),content:e.content,empty:e.empty,setter:t.setDate,build:function(e){var t=[],n=e.getDay(),i="",a="#";return(x>e||e>C)&&t.push(Z),+e===T&&t.push("k-today"),(0===n||6===n)&&t.push("k-weekend"),f&&p(+e,o)&&(a=d.replace("{0}",b.toString(e,c,u)),i=" k-action-link"),{date:e,dates:o,ns:b.ns,title:b.toString(e,"D",u),value:e.getDate(),dateString:F(e),cssClass:t[0]?' class="'+t.join(" ")+'"':"",linkClass:i,url:a}}})},first:function(e){return _.firstDayOfMonth(e)},last:function(e){var t=new gt(e.getFullYear(),e.getMonth()+1,0),n=_.firstDayOfMonth(e),i=Math.abs(t.getTimezoneOffset()-n.getTimezoneOffset());return i&&t.setHours(n.getHours()+i/60),t},compare:function(e,t){var n,i=e.getMonth(),a=e.getFullYear(),s=t.getMonth(),r=t.getFullYear();return n=a>r?1:r>a?-1:i==s?0:i>s?1:-1},setDate:function(e,t){var n=e.getHours();t instanceof gt?e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()):_.setTime(e,t*ot),D(e,n)},toDateString:function(e){return e.getFullYear()+"/"+e.getMonth()+"/"+e.getDate()}},{name:"year",title:function(e){return e.getFullYear()},content:function(e){var t=h(e.culture).months.namesAbbr,n=this.toDateString,a=e.min,s=e.max;return i({min:new gt(a.getFullYear(),a.getMonth(),1),max:new gt(s.getFullYear(),s.getMonth(),1),start:new gt(e.date.getFullYear(),0,1),setter:this.setDate,build:function(e){return{value:t[e.getMonth()],ns:b.ns,dateString:n(e),cssClass:""}}})},first:function(e){return new gt(e.getFullYear(),0,e.getDate())},last:function(e){return new gt(e.getFullYear(),11,e.getDate())},compare:function(e,t){return a(e,t)},setDate:function(e,t){var n,i=e.getHours();t instanceof gt?(n=t.getMonth(),e.setFullYear(t.getFullYear(),n,e.getDate()),n!==e.getMonth()&&e.setDate(0)):(n=e.getMonth()+t,e.setMonth(n),n>11&&(n-=12),n>0&&e.getMonth()!=n&&e.setDate(0)),D(e,i)},toDateString:function(e){return e.getFullYear()+"/"+e.getMonth()+"/1"}},{name:"decade",title:function(e,t,i){return n(e,t,i,10)},content:function(e){var t=e.date.getFullYear(),n=this.toDateString;return i({start:new gt(t-t%10-1,0,1),min:new gt(e.min.getFullYear(),0,1),max:new gt(e.max.getFullYear(),0,1),setter:this.setDate,build:function(e,t){return{value:e.getFullYear(),ns:b.ns,dateString:n(e),cssClass:0===t||11==t?J:""}}})},first:function(e){var t=e.getFullYear();return new gt(t-t%10,e.getMonth(),e.getDate())},last:function(e){var t=e.getFullYear();return new gt(t-t%10+9,e.getMonth(),e.getDate())},compare:function(e,t){return a(e,t,10)},setDate:function(e,t){c(e,t,1)},toDateString:function(e){return e.getFullYear()+"/0/1"}},{name:U,title:function(e,t,i){return n(e,t,i,100)},content:function(e){var t=e.date.getFullYear(),n=e.min.getFullYear(),a=e.max.getFullYear(),s=this.toDateString,r=n,o=a;return r-=r%10,o-=o%10,10>o-r&&(o=r+9),i({start:new gt(t-t%100-10,0,1),min:new gt(r,0,1),max:new gt(o,0,1),setter:this.setDate,build:function(e,t){var i=e.getFullYear(),r=i+9;return n>i&&(i=n),r>a&&(r=a),{ns:b.ns,value:i+" - "+r,dateString:s(e),cssClass:0===t||11==t?J:""}}})},first:function(e){var t=e.getFullYear();return new gt(t-t%100,e.getMonth(),e.getDate())},last:function(e){var t=e.getFullYear();return new gt(t-t%100+99,e.getMonth(),e.getDate())},compare:function(e,t){return a(e,t,100)},setDate:function(e,t){c(e,t,10)},toDateString:function(e){var t=e.getFullYear();return t-t%10+"/0/1"}}]},_.isEqualDatePart=v,_.makeUnselectable=g,_.restrictValue=r,_.isInRange=o,_.normalize=f,_.viewsEnum=pt,b.calendar=_}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(e,t){t()});