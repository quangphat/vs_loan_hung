/**
 * Copyright 2014 Telerik AD
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/**
 * Copyright 2014 Telerik AD
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

!function(e,define){define(["./kendo.core.min"],e)}(function(){return function(e){function t(t,n){return t===n||e.contains(t,n)}var n=window.kendo,i=n.ui,r=i.Widget,a=n.support,o=n.getOffset,s=n._activeElement,l="open",u="close",c="deactivate",d="activate",p="center",h="left",f="right",m="top",g="bottom",v="absolute",_="hidden",w="body",b="location",y="position",k="visible",x="effects",C="k-state-active",T="k-state-border",S=/k-state-border-(\w+)/,F=".k-picker-wrap, .k-dropdown-wrap, .k-link",D="down",E=e(window),M=e(document.documentElement),A="resize scroll",I=a.transitions.css,P=I+"transform",O=e.extend,H=".kendoPopup",z=["font-size","font-family","font-stretch","font-style","font-weight","line-height"],N=r.extend({init:function(t,i){var a,o=this;i=i||{},i.isRtl&&(i.origin=i.origin||g+" "+f,i.position=i.position||m+" "+f),r.fn.init.call(o,t,i),t=o.element,i=o.options,o.collisions=i.collision?i.collision.split(" "):[],1===o.collisions.length&&o.collisions.push(o.collisions[0]),a=e(o.options.anchor).closest(".k-popup,.k-group").filter(":not([class^=km-])"),i.appendTo=e(e(i.appendTo)[0]||a[0]||w),o.element.hide().addClass("k-popup k-group k-reset").toggleClass("k-rtl",!!i.isRtl).css({position:v}).appendTo(i.appendTo).on("mouseenter"+H,function(){o._hovered=!0}).on("mouseleave"+H,function(){o._hovered=!1}),o.wrapper=e(),i.animation===!1&&(i.animation={open:{effects:{}},close:{hide:!0,effects:{}}}),O(i.animation.open,{complete:function(){o.wrapper.css({overflow:k}),o.trigger(d)}}),O(i.animation.close,{complete:function(){o.wrapper.hide();var r,a,s=o.wrapper.data(b),l=e(i.anchor);s&&o.wrapper.css(s),i.anchor!=w&&(r=(l[0].className.match(S)||["","down"])[1],a=T+"-"+r,l.removeClass(a).children(F).removeClass(C).removeClass(a),t.removeClass(T+"-"+n.directions[r].reverse)),o._closing=!1,o.trigger(c)}}),o._mousedownProxy=function(e){o._mousedown(e)},o._resizeProxy=function(e){o._resize(e)},i.toggleTarget&&e(i.toggleTarget).on(i.toggleEvent+H,e.proxy(o.toggle,o))},events:[l,d,u,c],options:{name:"Popup",toggleEvent:"click",origin:g+" "+h,position:m+" "+h,anchor:w,collision:"flip fit",viewport:window,copyAnchorStyles:!0,autosize:!1,modal:!1,animation:{open:{effects:"slideIn:down",transition:!0,duration:200},close:{duration:100,hide:!0}}},destroy:function(){var t,i=this,a=i.options,o=i.element.off(H);r.fn.destroy.call(i),a.toggleTarget&&e(a.toggleTarget).off(H),a.modal||(M.unbind(D,i._mousedownProxy),E.unbind(A,i._resizeProxy)),n.destroy(i.element.children()),o.removeData(),a.appendTo[0]===document.body&&(t=o.parent(".k-animation-container"),t[0]?t.remove():o.remove())},open:function(t,i){var r,o,s,u=this,c={isFixed:!isNaN(parseInt(i,10)),x:t,y:i},d=u.element,p=u.options,h="down",f=e(p.anchor),g=d[0]&&d.hasClass("km-widget");if(!u.visible()){if(p.copyAnchorStyles&&(g&&"font-size"==z[0]&&z.shift(),d.css(n.getComputedStyles(f[0],z))),d.data("animating")||u.trigger(l))return;p.modal||(M.unbind(D,u._mousedownProxy).bind(D,u._mousedownProxy),a.mobileOS.ios||a.mobileOS.android||E.unbind(A,u._resizeProxy).bind(A,u._resizeProxy)),u.wrapper=o=n.wrap(d,p.autosize).css({overflow:_,display:"block",position:v}),a.mobileOS.android&&o.add(f).css(P,"translatez(0)"),o.css(y),e(p.appendTo)[0]==document.body&&o.css(m,"-10000px"),r=O(!0,{},p.animation.open),u.flipped=u._position(c),r.effects=n.parseEffects(r.effects,u.flipped),h=r.effects.slideIn?r.effects.slideIn.direction:h,p.anchor!=w&&(s=T+"-"+h,d.addClass(T+"-"+n.directions[h].reverse),f.addClass(s).children(F).addClass(C).addClass(s)),d.data(x,r.effects).kendoStop(!0).kendoAnimate(r)}},toggle:function(){var e=this;e[e.visible()?u:l]()},visible:function(){return this.element.is(":"+k)},close:function(){var t,i,r,a,o=this,s=o.options;if(o.visible()){if(t=o.wrapper[0]?o.wrapper:n.wrap(o.element).hide(),o._closing||o.trigger(u))return;o.element.find(".k-popup").each(function(){var t=e(this),n=t.data("kendoPopup");n&&n.close()}),M.unbind(D,o._mousedownProxy),E.unbind(A,o._resizeProxy),i=O(!0,{},s.animation.close),r=o.element.data(x),a=i.effects,!a&&!n.size(a)&&r&&n.size(r)&&(i.effects=r,i.reverse=!0),o._closing=!0,o.element.kendoStop(!0),t.css({overflow:_}),o.element.kendoAnimate(i)}},_resize:function(e){var n=this;"resize"===e.type?(clearTimeout(n._resizeTimeout),n._resizeTimeout=setTimeout(function(){n._position(),n._resizeTimeout=null},50)):n._hovered||t(n.element[0],s())||n.close()},_mousedown:function(i){var r=this,a=r.element[0],o=r.options,s=e(o.anchor)[0],l=o.toggleTarget,u=n.eventTarget(i),c=e(u).closest(".k-popup"),d=c.parent().parent(".km-shim").length;c=c[0],(d||!c||c===r.element[0])&&"popover"!==e(i.target).closest("a").data("rel")&&(t(a,u)||t(s,u)||l&&t(e(l)[0],u)||r.close())},_fit:function(e,t,n){var i=0;return e+t>n&&(i=n-(e+t)),0>e&&(i=-e),i},_flip:function(e,t,n,i,r,a,o){var s=0;return o=o||t,a!==r&&a!==p&&r!==p&&(e+o>i&&(s+=-(n+t)),0>e+s&&(s+=n+t)),s},_position:function(t){var n,i,r,s,l,u,c,d,p,h=this,f=h.element.css(y,""),m=h.wrapper,g=h.options,_=e(g.viewport),w=_.offset(),k=e(g.anchor),x=g.origin.toLowerCase().split(" "),C=g.position.toLowerCase().split(" "),T=h.collisions,S=a.zoomLevel(),F=10002,D=!!(_[0]==window&&window.innerWidth&&1.02>=S),E=0,M=D?window.innerWidth:_.width(),A=D?window.innerHeight:_.height(),I=k.parents().filter(m.siblings());if(I[0])if(i=+e(I).css("zIndex"))F=i+1;else for(n=k.parentsUntil(I),r=n.length;r>E;E++)i=+e(n[E]).css("zIndex"),i&&i>F&&(F=i+1);return m.css("zIndex",F),t&&t.isFixed?m.css({left:t.x,top:t.y}):m.css(h._align(x,C)),s=o(m,y,k[0]===m.offsetParent()[0]),l=o(m),u=k.offsetParent().parent(".k-animation-container,.k-popup,.k-group"),u.length&&(s=o(m,y,!0),l=o(m)),_[0]===window?(l.top-=window.pageYOffset||document.documentElement.scrollTop||0,l.left-=window.pageXOffset||document.documentElement.scrollLeft||0):(l.top-=w.top,l.left-=w.left),h.wrapper.data(b)||m.data(b,O({},s)),c=O({},l),d=O({},s),"fit"===T[0]&&(d.top+=h._fit(c.top,m.outerHeight(),A/S)),"fit"===T[1]&&(d.left+=h._fit(c.left,m.outerWidth(),M/S)),p=O({},d),"flip"===T[0]&&(d.top+=h._flip(c.top,f.outerHeight(),k.outerHeight(),A/S,x[0],C[0],m.outerHeight())),"flip"===T[1]&&(d.left+=h._flip(c.left,f.outerWidth(),k.outerWidth(),M/S,x[1],C[1],m.outerWidth())),f.css(y,v),m.css(d),d.left!=p.left||d.top!=p.top},_align:function(t,n){var i,r=this,a=r.wrapper,s=e(r.options.anchor),l=t[0],u=t[1],c=n[0],d=n[1],h=o(s),m=e(r.options.appendTo),v=a.outerWidth(),_=a.outerHeight(),w=s.outerWidth(),b=s.outerHeight(),y=h.top,k=h.left,x=Math.round;return m[0]!=document.body&&(i=o(m),y-=i.top,k-=i.left),l===g&&(y+=b),l===p&&(y+=x(b/2)),c===g&&(y-=_),c===p&&(y-=x(_/2)),u===f&&(k+=w),u===p&&(k+=x(w/2)),d===f&&(k-=v),d===p&&(k-=x(v/2)),{top:y,left:k}}});i.plugin(N)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(e,t){t()});